<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title><h3>Dragon Terminal Pro</h3> <br>
<a href="https://full-submit.github.io/" title="Join my terminal to communicate with bot host text edit bot responses to suit your requirement also add code responses if that your type of thing.">
    
</a>

</title>

    <style>
        :root {
            --dragon-green: #00ff41;
            --host-yellow: #adff2f;
            --user-light-green: #90ee90;
            --dark-bg: #0a0a0a;
            --panel-bg: #111;
            --text-white: #ffffff;
            --edit-gold: #ffcc00;
        }

        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }

        body, html { 
            height: 100%;
            margin: 0;
            padding: 0;
            overflow: hidden;
            background: var(--dark-bg);
            font-family: 'Courier New', Courier, monospace;
        }

        body { display: flex; flex-direction: column; color: var(--dragon-green); }

        nav {
            width: 100%;
            background: #000;
            border-bottom: 1px solid var(--dragon-green);
            padding: 10px 15px;
            display: flex;
            align-items: center;
            gap: 15px;
            z-index: 10;
        }

        .profile-pic {
            width: 45px;
            height: 45px;
            border-radius: 50%;
            border: 2px solid var(--dragon-green);
            background: #222;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 22px;
            flex-shrink: 0;
        }

        .user-info { display: flex; flex-direction: column; flex-grow: 1; overflow: hidden; }
        .username-text { font-size: 14px; font-weight: bold; color: var(--text-white); }
        .status-text { font-size: 11px; color: #888; }
        
        .profile-input {
            background: #000;
            border: 1px solid var(--dragon-green);
            color: var(--text-white);
            font-family: inherit;
            padding: 4px;
            border-radius: 4px;
            width: 120px;
            font-size: 12px;
            margin-bottom: 2px;
        }

        .profile-action-btn {
            background: transparent;
            color: var(--edit-gold);
            border: 1px solid var(--edit-gold);
            padding: 2px 8px;
            cursor: pointer;
            font-size: 10px;
            margin-top: 4px;
            width: fit-content;
        }

        #app-wrapper {
            flex: 1;
            display: flex;
            flex-direction: column;
            overflow: hidden;
            position: relative;
            align-items: center;
        }

        #container { 
            width: calc(100% - 20px);
            max-width: 800px;
            flex: 1;
            margin: 10px 0;
            background: var(--panel-bg);
            border: 1px solid #222;
            display: flex;
            flex-direction: column;
            position: relative;
            padding: 15px;
            overflow: hidden;
            border-radius: 8px;
        }

        .terminal-header {
            position: absolute;
            top: 5px;
            right: 15px;
            z-index: 20;
        }

        .menu-dots { cursor: pointer; font-size: 24px; color: #555; padding: 5px; }

        .menu-dropdown {
            display: none;
            position: absolute;
            top: 35px;
            right: 0;
            background: #1a1a1a;
            border: 1px solid #333;
            box-shadow: 0 4px 15px rgba(0,0,0,0.8);
            min-width: 160px;
            border-radius: 4px;
        }

        .menu-dropdown.show { display: block; }

        .menu-item {
            padding: 12px;
            font-size: 13px;
            color: var(--text-white);
            cursor: pointer;
        }

        #chat-view, #edit-view {
            flex: 1;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            padding-bottom: 10px;
            scroll-behavior: smooth;
        }

        #edit-view { display: none; }

        .chat-entry { margin-bottom: 12px; line-height: 1.5; font-size: 14px; word-wrap: break-word; }
        .chat-entry.user { color: var(--user-light-green); }
        .chat-entry.host { color: var(--host-yellow); }
        .chat-entry.system { color: var(--edit-gold); font-style: italic; }
        .timestamp { color: #555; margin-right: 8px; font-size: 0.75em; }

        .category-block {
            border: 1px solid #333;
            padding: 12px;
            border-radius: 6px;
            background: #080808;
            margin-bottom: 15px;
        }

        .category-header { display: flex; gap: 8px; margin-bottom: 10px; align-items: center; }
        .category-name-input {
            background: transparent;
            border: none;
            border-bottom: 1px solid var(--edit-gold);
            color: var(--edit-gold);
            font-family: inherit;
            font-weight: bold;
            font-size: 14px;
            flex: 1;
        }

        .slot-row {
            display: flex;
            gap: 5px;
            background: #000;
            padding: 6px;
            border: 1px solid #1a1a1a;
            margin-bottom: 6px;
        }

        .slot-input {
            background: #111;
            border: 1px solid #333;
            color: var(--dragon-green);
            padding: 8px;
            flex: 1;
            font-family: inherit;
            font-size: 12px;
            min-width: 0;
        }

        .controls-row {
            display: flex;
            gap: 5px;
            width: 100%;
            align-items: center;
            padding-top: 10px;
            border-top: 1px solid #222;
            flex-shrink: 0;
            background: var(--panel-bg);
        }

        .text-control { 
            flex: 2;
            font-size: 14px;
            padding: 0 10px;
            background: #000;
            border: 1px solid #444;
            color: var(--text-white);
            outline: none;
            border-radius: 4px;
            height: 44px;
            text-align: center;
            min-width: 0;
        }

        .send-btn, .mode-toggle-btn, .save-exit-btn { 
            border: none;
            padding: 0 10px;
            font-weight: bold;
            cursor: pointer;
            height: 44px;
            font-family: inherit;
            border-radius: 4px;
            font-size: 12px;
            flex-shrink: 0;
        }

        .send-btn { background: var(--dragon-green); color: #000; }
        .mode-toggle-btn { background: #333; color: #ccc; }
        .save-exit-btn { background: var(--dragon-green); color: #000; width: 100%; }

        footer {
            width: 100%;
            background: #000;
            border-top: 1px solid #222;
            padding: 10px 15px;
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 20px;
            font-size: 11px;
            z-index: 10;
            flex-shrink: 0;
            white-space: nowrap;
        }

        /* Updated footer text colors */
        #footer-owner, #footer-clock {
            color: var(--text-white);
        }

        .download-btn {
            color: var(--dragon-green);
            text-decoration: none;
            border: 1px solid var(--dragon-green);
            padding: 3px 10px;
            border-radius: 4px;
            cursor: pointer;
        }

        .hidden { display: none; }
    </style>
</head>
<body>

<nav>
    <div class="profile-pic">üêâ</div>
    <div class="user-info">
        <div id="profile-display">
            <div class="username-text" id="user-name">Dragon_Rider</div>
            <div class="status-text" id="user-status">Status: Online</div>
        </div>
        <div id="profile-edit" class="hidden">
            <input type="text" id="input-name" class="profile-input" placeholder="Name">
            <input type="text" id="input-status" class="profile-input" placeholder="Status">
        </div>
        <button id="profile-toggle" class="profile-action-btn">Edit Profile</button>
    </div>
</nav>

<div id="app-wrapper">
    <div id="container">
        <div class="terminal-header" id="terminal-menu-root">
            <div class="menu-dots" id="menu-dots">‚ãÆ</div>
            <div class="menu-dropdown" id="menu-dropdown">
                <div class="menu-item" id="delete-chat-btn">üóëÔ∏è Clear Cache</div>
            </div>
        </div>
        
        <div id="chat-view"><div class="chat-entry user"><span class="timestamp">16:20:15</span> Dragon_Rider: Hello</div><div class="chat-entry host"><span class="timestamp">16:20:15</span> HOST: Greetings, Commander.</div><div class="chat-entry user"><span class="timestamp">16:20:29</span> Dragon_Rider: Greetings, Commander.</div><div class="chat-entry host"><span class="timestamp">16:20:30</span> HOST: Greetings, Commander.</div></div>

        <div id="edit-view">
            <div id="categories-container"></div>
            <button class="profile-action-btn" id="add-category-btn" style="margin-top:10px; border-color:var(--edit-gold); color:var(--edit-gold);">+ New Category Array</button>
        </div>
        
        <div class="controls-row" id="normal-controls">
            <input id="text-control" class="text-control" placeholder="Command..." enterkeyhint="send">
            <button class="send-btn" id="send-btn">SEND</button>
            <button class="mode-toggle-btn" id="master-edit-btn">EDIT</button>
        </div>

        <div class="controls-row hidden" id="edit-controls">
            <button class="save-exit-btn" id="save-exit-btn">SAVE AND EXIT</button>
        </div>
    </div>
</div>

<footer>
    <div id="footer-owner">Owner: Dragon_Rider</div>
    <div id="download-app" class="download-btn">Download Terminal</div>
    <div id="footer-clock">16:21:02</div>
</footer>

<script>
    const chatView = document.getElementById('chat-view');
    const editView = document.getElementById('edit-view');
    const categoriesContainer = document.getElementById('categories-container');
    const textInput = document.getElementById('text-control');
    const userNameEl = document.getElementById('user-name');
    const userStatusEl = document.getElementById('user-status');
    const footerOwner = document.getElementById('footer-owner');

    let chatHistory = JSON.parse(localStorage.getItem('dragon_chats')) || [];
    let categorizedLogic = JSON.parse(localStorage.getItem('dragon_logic')) || [
        { name: "Greetings", items: [{ trigger: "hello", response: "Greetings, Commander." }] }
    ];

    userNameEl.textContent = localStorage.getItem('dragon_user') || "Dragon_Rider";
    userStatusEl.textContent = localStorage.getItem('dragon_status') || "Status: Online";
    footerOwner.textContent = "Owner: " + userNameEl.textContent;

    // --- Inactivity Logic ---
    let inactivityTimer;
    let randomMessageTimers = [];

    function resetInactivityTimer() {
        clearTimeout(inactivityTimer);
        randomMessageTimers.forEach(t => clearTimeout(t));
        randomMessageTimers = [];

        inactivityTimer = setTimeout(() => {
            triggerRandomInactivityMessages();
        }, 7 * 60 * 1000); // 7 minutes
    }

    function triggerRandomInactivityMessages() {
        let allResponses = [];
        categorizedLogic.forEach(cat => {
            cat.items.forEach(item => {
                if (item.response) allResponses.push(item.response);
            });
        });

        if (allResponses.length === 0) return;

        for (let i = 0; i < 2; i++) {
            const randomDelay = Math.random() * 7 * 60 * 1000;
            const timer = setTimeout(() => {
                const randomMsg = allResponses[Math.floor(Math.random() * allResponses.length)];
                addHostMessage(randomMsg);
            }, randomDelay);
            randomMessageTimers.push(timer);
        }
    }

    function addHostMessage(text) {
        const time = new Date().toLocaleTimeString('en-GB', {hour12:false});
        chatHistory.push({text: text, type: 'host', time});
        localStorage.setItem('dragon_chats', JSON.stringify(chatHistory));
        renderChat();
        speakText(text);
    }

    // --- Simple Download Logic ---
    document.getElementById('download-app').onclick = () => {
        const currentHtml = document.documentElement.outerHTML;
        const blob = new Blob([currentHtml], { type: 'text/html' });
        const url = URL.createObjectURL(blob);
        const a = document.createElement('a');
        a.href = url;
        a.download = "Dragon_Terminal_Pro.html";
        a.click();
        URL.revokeObjectURL(url);
    };

    // --- UI Logic ---
    function renderChat() {
        chatView.innerHTML = '';
        chatHistory.forEach(msg => {
            const div = document.createElement('div');
            div.className = `chat-entry ${msg.type}`;
            div.innerHTML = `<span class="timestamp">${msg.time}</span> ${msg.type === 'user' ? userNameEl.textContent+': ' : 'HOST: '}${msg.text}`;
            chatView.appendChild(div);
        });
        chatView.scrollTop = chatView.scrollHeight;
    }

    function renderCategories() {
        categoriesContainer.innerHTML = '';
        categorizedLogic.forEach((cat, cIdx) => {
            const div = document.createElement('div');
            div.className = 'category-block';
            div.innerHTML = `<div class="category-header"><input class="category-name-input" value="${cat.name}"><button class="profile-action-btn" style="color:red; border-color:red" onclick="removeCategory(${cIdx})">Del</button></div>`;
            cat.items.forEach((item, iIdx) => {
                const row = document.createElement('div');
                row.className = 'slot-row';
                row.innerHTML = `
                    <input class="slot-input trig" value="${item.trigger}">
                    <input class="slot-input resp" value="${item.response}">
                    <button class="profile-action-btn" onclick="removeItem(${cIdx},${iIdx})">X</button>
                `;
                div.appendChild(row);
            });
            const addBtn = document.createElement('button');
            addBtn.className = 'profile-action-btn';
            addBtn.textContent = '+ Add Slot';
            addBtn.onclick = () => { categorizedLogic[cIdx].items.push({trigger:'', response:''}); renderCategories(); };
            div.appendChild(addBtn);
            categoriesContainer.appendChild(div);
        });
    }

    window.removeItem = (c, i) => { categorizedLogic[c].items.splice(i, 1); renderCategories(); };
    window.removeCategory = (c) => { categorizedLogic.splice(c, 1); renderCategories(); };

    document.getElementById('add-category-btn').onclick = () => {
        categorizedLogic.push({name: 'New Array', items: [{trigger: '', response: ''}]});
        renderCategories();
    };

    document.getElementById('master-edit-btn').onclick = () => {
        document.getElementById('normal-controls').classList.add('hidden');
        document.getElementById('edit-controls').classList.remove('hidden');
        chatView.style.display = 'none';
        editView.style.display = 'block';
        document.getElementById('terminal-menu-root').style.display = 'none';
        renderCategories();
    };

    document.getElementById('save-exit-btn').onclick = () => {
        const blocks = document.querySelectorAll('.category-block');
        categorizedLogic = Array.from(blocks).map(block => ({
            name: block.querySelector('.category-name-input').value,
            items: Array.from(block.querySelectorAll('.slot-row')).map(row => ({
                trigger: row.querySelector('.trig').value.toLowerCase(),
                response: row.querySelector('.resp').value
            }))
        }));
        localStorage.setItem('dragon_logic', JSON.stringify(categorizedLogic));
        document.getElementById('normal-controls').classList.remove('hidden');
        document.getElementById('edit-controls').classList.add('hidden');
        chatView.style.display = 'flex';
        editView.style.display = 'none';
        document.getElementById('terminal-menu-root').style.display = 'block';
        renderChat();
    };

    document.getElementById('profile-toggle').onclick = () => {
        const isEditing = !document.getElementById('profile-display').classList.contains('hidden');
        if (isEditing) {
            document.getElementById('input-name').value = userNameEl.textContent;
            document.getElementById('input-status').value = userStatusEl.textContent.replace('Status: ', '');
            document.getElementById('profile-display').classList.add('hidden');
            document.getElementById('profile-edit').classList.remove('hidden');
            document.getElementById('profile-toggle').textContent = "Save";
        } else {
            userNameEl.textContent = document.getElementById('input-name').value || "User";
            userStatusEl.textContent = "Status: " + (document.getElementById('input-status').value || "Online");
            footerOwner.textContent = "Owner: " + userNameEl.textContent;
            localStorage.setItem('dragon_user', userNameEl.textContent);
            localStorage.setItem('dragon_status', userStatusEl.textContent);
            document.getElementById('profile-display').classList.remove('hidden');
            document.getElementById('profile-edit').classList.add('hidden');
            document.getElementById('profile-toggle').textContent = "Edit Profile";
        }
    };

    function speakText(text) {
        if ('speechSynthesis' in window) {
            const utterance = new SpeechSynthesisUtterance(text);
            window.speechSynthesis.speak(utterance);
        }
    }

    function handleSend() {
        const val = textInput.value.trim();
        if (!val) return;
        
        resetInactivityTimer();

        const time = new Date().toLocaleTimeString('en-GB', {hour12:false});
        chatHistory.push({text: val, type: 'user', time});
        
        let resp = "Command unrecognized.";
        for(let cat of categorizedLogic) {
            let match = cat.items.find(i => {
                const lowInput = val.toLowerCase();
                const lowTrig = i.trigger.toLowerCase();
                const lowResp = i.response.toLowerCase();
                return (lowTrig !== "" && lowInput.includes(lowTrig)) || (lowResp !== "" && lowInput === lowResp);
            });
            if(match) { resp = match.response; break; }
        }

        setTimeout(() => {
            addHostMessage(resp);
        }, 300);

        textInput.value = '';
        renderChat();
    }

    document.getElementById('menu-dots').onclick = (e) => { e.stopPropagation(); document.getElementById('menu-dropdown').classList.toggle('show'); };
    window.onclick = () => document.getElementById('menu-dropdown').classList.remove('show');
    
    document.getElementById('delete-chat-btn').onclick = () => { 
        chatHistory = []; 
        localStorage.removeItem('dragon_chats'); 
        renderChat(); 
    };

    document.getElementById('send-btn').onclick = handleSend;
    textInput.onkeypress = (e) => { if(e.key === 'Enter') handleSend(); };
    textInput.oninput = resetInactivityTimer;
    
    setInterval(() => document.getElementById('footer-clock').textContent = new Date().toLocaleTimeString('en-GB', {hour12:false}), 1000);
    
    resetInactivityTimer();
    renderChat();
</script>

</body></html>